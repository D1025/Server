                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 

void item_init(Item&item,bool firstTime)
{
	item.SetEvent((2),"_Use");
	item.LockerComplexity=Random(50,100);
}   

bool _Use(Item&item,Critter&crit,Critter@onCritter,Item@onItem,Scenery@onScenery)
{
	if(!(@onItem!=null)||onItem.GetType()!=(8))
	return false; 
	
	if((not((onItem.LockerCondition&(0x01))!=0)))
	return false;
	
	uint lockId=Random(1,65535);
	
	onItem.LockerId=lockId;
	onItem.LockerComplexity=item.LockerComplexity; 
	
	if(item.GetCount()>1)
	item.SetCount(item.GetCount()-1);
	else
	DeleteItem(item);
	
	Item@key=crit.AddItem((82),1);
	key.LockerId=lockId;
	key.Update();
	
	crit.SayMsg((11),(0),4400);
	return true;
}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         

uint ItemPerkTypeParam(uint8 type)
{
	uint param=0;
	switch(type)
	{
		case(1):
		return((114));
		case(2):
		return((145));
		default:
		{;};
		break;
	}
	
	return(0);
}

void DisableItemPerk(Critter&cr,uint8 type)
{
	uint param=ItemPerkTypeParam(type);
	
	if(param>0)
	{
		ApplyItemPerk(cr,type,cr.Stat[param],false);
		cr.StatBase[param]=0;
	}
}

void DisableItemPerk(Critter&cr,Item&item,uint8 type)
{
	uint param=ItemPerkTypeParam(type);
	
	ApplyItemPerk(cr,type,item.Proto.Armor_Perk,false);
	if(param>0)
	cr.StatBase[param]=0;
}

void EnableItemPerk(Critter&cr,Item&item,uint8 type)
{
	uint param=ItemPerkTypeParam(type);
	
	ApplyItemPerk(cr,type,item.Proto.Armor_Perk,true);
	if(param>0)
	cr.StatBase[param]=item.Proto.Armor_Perk;
}

void ApplyItemPerk(Critter&cr,uint8 type,uint perk,bool enable)
{
	int sign=(enable?int(1):-1);
	
	switch(type)
	{
		case(1):
		{
			switch(perk)
			{
				case(1):
				cr.StatBase[(32)]+=3*sign;
				cr.StatBase[(62)]+=30*sign;
				break;
				case(2):
				cr.StatBase[(62)]+=20*sign;
				break;
				case(3):
				cr.StatBase[(32)]+=4*sign;
				cr.StatBase[(62)]+=60*sign;
				break;
				case(4):
				cr.StatBase[(32)]+=4*sign;
				cr.StatBase[(62)]+=75*sign;
				break;
				default:
				break;
			}
			;
			break;
		}
		
		case(2):
		{
			switch(perk)
			{
				case(1):
				cr.StatBase[(35)]+=1*sign;
				break;
				case(2):
				cr.StatBase[(33)]+=(cr.StatBase[(1)]>=4?0:4-(((cr.StatBase[(1)])>(3))?(3):(((cr.StatBase[(1)])<(1))?(1):(cr.StatBase[(1)]))))*sign;
				break; 
				
				default:
				break;
			}
			;
			break;
		}
	}
}


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     

bool IsReadableBook(uint16 pid)
{
	switch(pid)
	{
		case(73):
		case(76):
		case(80):
		case(86):
		case(22050):
		case(102):    
		
		return true;
		default:break;
	}
	return false;
}

void TryReadBook(Critter&cr,Item&book)
{
	int skillNum;
	uint strNum;
	uint readAlready;
	
	switch(book.GetProtoId())
	{
		case(73):skillNum=(212);strNum=(10452);readAlready=(9946);break;
		case(76):skillNum=(213);strNum=(10453);readAlready=(9947);break;
		case(80):skillNum=(206);strNum=(10454);readAlready=(9951);break;
		case(86):skillNum=(217);strNum=(10457);readAlready=(9949);break;
		case(22050):skillNum=(215);strNum=10458;readAlready=(9950);break;
		case(102):skillNum=(200);strNum=(10455);readAlready=(9952);break;    
		
		default:return;
	}
	
	GameVar@readAlreadyVar=GetLocalVar(readAlready,cr.Id);
	if((@readAlreadyVar!=null)&&readAlreadyVar.GetValue()<10)
	{       
		
		for(int sp=6;sp>0;)
		{
			if(cr.Skill[skillNum]>150&&sp>3)
			if((cr.TagSkill[(226)]==int(skillNum)||cr.TagSkill[(227)]==int(skillNum)||cr.TagSkill[(228)]==int(skillNum)||cr.TagSkill[(229)]==int(skillNum))){cr.SkillBase[skillNum]+=2;sp=0;}
			else{cr.SkillBase[skillNum]+=1;sp=0;}
			else if(cr.Skill[skillNum]>125&&sp>2)
			if((cr.TagSkill[(226)]==int(skillNum)||cr.TagSkill[(227)]==int(skillNum)||cr.TagSkill[(228)]==int(skillNum)||cr.TagSkill[(229)]==int(skillNum))){cr.SkillBase[skillNum]+=2;sp-=3;}
			else{cr.SkillBase[skillNum]+=1;sp-=3;}
			else if(cr.Skill[skillNum]>100&&sp>1)
			if((cr.TagSkill[(226)]==int(skillNum)||cr.TagSkill[(227)]==int(skillNum)||cr.TagSkill[(228)]==int(skillNum)||cr.TagSkill[(229)]==int(skillNum))){cr.SkillBase[skillNum]+=2;sp-=2;}
			else{cr.SkillBase[skillNum]+=1;sp-=2;}
			else if(cr.Skill[skillNum]<=100&&sp>0)
			if((cr.TagSkill[(226)]==int(skillNum)||cr.TagSkill[(227)]==int(skillNum)||cr.TagSkill[(228)]==int(skillNum)||cr.TagSkill[(229)]==int(skillNum))){cr.SkillBase[skillNum]+=2;sp-=1;}
			else{cr.SkillBase[skillNum]+=1;sp-=1;}
			else sp=0;
		}
		
		cr.SayMsg((11),(3),strNum);
		readAlreadyVar+=1;
		do{if(book.GetCount()>(1)) book.SetCount(book.GetCount()-(1));else DeleteItem(book);}while(false); 
		
		if(cr.Skill[(217)]>175)cr.SkillBase[(217)]=175;
		if(cr.Skill[(212)]>200)cr.SkillBase[(212)]=200;
		if(cr.Skill[(213)]>200)cr.SkillBase[(213)]=200;
		if(cr.Skill[(215)]>150)cr.SkillBase[(215)]=150;
		if(cr.Skill[(206)]>200)cr.SkillBase[(206)]=200;
		if(cr.Skill[(200)]>300)cr.SkillBase[(200)]=300;
	}
	else cr.SayMsg((11),(3),(10451));
}        

